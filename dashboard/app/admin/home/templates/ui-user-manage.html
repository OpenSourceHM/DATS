{% extends "layouts/base.html" %}

{% block title %} {{_('User Management')}} {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-header card-header-info">
        <h4 class="card-title ">{{_('User Management')}}</h4>
        <p class="card-category"> {{_('DATS user table')}}</p>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <div>
            <span class="tim-note">{{ _('Total Pages')}}: {{data.pages}}</span>&nbsp;
            <span class="tim-note">{{ _('Total')}}: {{data.total}}</span>
            <btn class="btn btn-sm btn-info shadow-2 float-right" data-toggle="modal"
              data-target="#addModal">{{_('Add')}}</btn>

            <!-- Modal open by btn -->
            <div class="modal fade" id="addModal" tabindex="-1" role="dialog"
              aria-labelledby="exampleModalSignTitle" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-md" role="document">
                <div class="modal-content">
                  <!-- padding 3rem -->
                  <div class="modal-body p-5">
                    <div class="card">
                      <div class="card-header card-header-info" style="margin-top: -100px;">
                        <h5 class="card-title">{{_('Add')}}{{_('User')}}</h5>
                        <p class="card-category">{{_('Enter your username, email and password to register')}}</p>
                      </div>
                      <div class="card-body">
                        <form role="form" method="post" action="/register" style="margin-top: 30px;">               
          
                            <div class="input-group mb-3">
                              <input class="form-control" placeholder="{{_('Username')}}" id="username_login" name="username" required="" type="text" value="">
                            </div>
                  
                            <div class="input-group mb-3">
                              <input class="input form-control" placeholder="{{_('Email')}}" id="emial_login" name="email" p="" required="" type="email" value="">
                            </div>
          
                            <div class="input-group mb-4">
                              <input class="form-control" placeholder="{{_('Password')}}" id="pwd_login" name="password" p="" required="" type="password" value="">
                            </div>
                            <button type="submit" name="register" class="btn btn-info shadow-2 mb-4 float-right">{{_('Confirm')}}</button>
          
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>


          </div>
          <table class="table">
            <thead class=" text-info">
              <th>
                {{_('ID')}}
              </th>
              <th>
                {{_('Username')}}
              </th>
              <th>
                {{_('Email')}}
              </th>
              <th>
                {{_('ActiveStatus')}}
              </th>
              <th>
                {{_('Operation')}}
              </th>
            </thead>
            <tbody>
              {% for user in data.results %}
              <tr>
                <td>
                  {{user.id}}
                </td>
                <td>
                  {{user.username}}
                </td>
                <td>
                  {{user.email}}
                </td>
                <td>
                  {% if user.active %}
                  {{_('Yes')}}
                  {%else %}
                  {{_('No')}}
                  {%endif %}
                </td>
                <td>
                  <btn class="btn btn-sm btn-info shadow-2">{{_('modify')}}</btn>
                  <btn class="btn btn-sm btn-danger shadow-2">{{_('delete')}}</btn>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          <!--pagination-->
          <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">

              <li class="page-item"><a class="page-link"
                  href="/admin/ui-user-manage?page=1&per_page={{10}}">{{_('First')}}</a></li>
              <li class="page-item ">
                <a class="page-link" aria-label="Previous" href="{{data.prev}}">
                  <span aria-hidden="true">&laquo;</span>
                  <span class="sr-only">{{_('Previous')}}</span>
                </a>
              </li>
              {% for p in range(data.pages) %}
              <!-- current page -->
              {% if p == data.page-1 %}
              <li class="page-item active"><a class="page-link"
                  href="/admin/ui-user-manage?page={{p+1}}&per_page={{10}}">{{p+1}}</a></li>
              <!-- Not current page -->
              {% else %}
              <li class="page-item"><a class="page-link"
                  href="/admin/ui-user-manage?page={{p+1}}&per_page={{10}}">{{p+1}}</a></li>
              {%endif %}

              {% endfor %}
              <li class="page-item">
                <a class="page-link" aria-label="Next" href="{{data.next}}">
                  <span aria-hidden="true">&raquo;</span>
                  <span class="sr-only">{{_('Next')}}</span>
                </a>
              </li>
              <li class="page-item"><a class="page-link"
                  href="/admin/ui-user-manage?page={{data.pages}}&per_page={{10}}">{{_('Last')}}</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

  <script>
    $(document).ready(function() {
      //init DateTimePickers
      md.initFormExtendedDatetimepickers();
    });
  </script>
  
{% endblock javascripts %}